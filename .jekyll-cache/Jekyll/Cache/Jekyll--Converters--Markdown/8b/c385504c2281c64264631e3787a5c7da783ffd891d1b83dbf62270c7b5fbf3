I"µ<h1 id="java-fx---drag-and-drop">Java FX - Drag And Drop</h1>

<h1 id="exemple">Exemple</h1>

<p>Un gest de pressionar, arrossegar i soltar</p>

<p>Existeixen diferents tipus de gestos de pressionar, arrossegar i soltar. Al principi discutirem el <strong>gest simple de pressionar-arrossegar-soltar</strong> i el** gest complet de pressionar-arrossegar-soltar**.</p>

<p>Anem a basar-nos amb el exemple que podem observar en la segÃ¼en imatge:</p>

<p><img src="./images/dnd1.gif" alt="example" /></p>

<h2 id="un-simple-gest-de-pressionar-arrossegar-i-soltar">Un simple gest de pressionar, arrossegar i soltar</h2>

<p>El simple gest de pressionar, arrossegar i soltar Ã©s el gest dâ€™arrossegar predeterminat. Sâ€™utilitza quan el gest dâ€™arrossegar implica nomÃ©s un node (el node en el qual es va iniciar el gest). Durant el gest dâ€™arrossegament, tots els tipus de MouseDragEvent (arrossegar amb el mouse ingressat, arrossegar el mouse sobre, arrossegar el mouse per a eixir, i soltar lâ€™acciÃ³ dâ€™arrossegar el mouse) sâ€™envien nomÃ©s al node dâ€™origen del gest.</p>

<p>Quan es pressiona el botÃ³ del mouse, se selecciona el Node superior i <strong>tots els esdeveniments posteriors del mouse sâ€™envien a aqueix node fins que se solta el botÃ³ del mouse</strong>.</p>

<p><strong>Quan sâ€™arrossega el mouse a un altre Node, el Node en el qual es va iniciar el gest encara estÃ  davall del cursor</strong> i, per tant, cap altre node rep els esdeveniments fins que se solta el botÃ³ del mouse.</p>

<p>Lâ€™explicaciÃ³ anterior demostra un cas del simple gest de pressionar, arrossegar i soltar.</p>

<p>Afegeim dos nodes diferents de la classe TextField a una escena. Un es diu node dâ€™origen (source) i lâ€™altre node de destinaciÃ³ (target). El node de destÃ­ afegeix controladors <code class="language-plaintext highlighter-rouge">MouseDragEvent</code> per a detectar qualsevol esdeveniment dâ€™arrossegament del mouse en ell.</p>

<p>Tinga en compte que lâ€™esdeveniment de detecciÃ³ dâ€™arrossegament es genera una vegada desprÃ©s dâ€™arrossegar el mouse. Lâ€™objecte <code class="language-plaintext highlighter-rouge">MouseEvent</code> tÃ© un indicador <code class="language-plaintext highlighter-rouge">dragDetect</code>, que es pot configurar en els esdeveniments <code class="language-plaintext highlighter-rouge">mouse-pressed</code> i <code class="language-plaintext highlighter-rouge">mouse-dragged</code>. Si sâ€™estableix en vertader, lâ€™esdeveniment subsegÃ¼ent que es genera Ã©s lâ€™esdeveniment de <code class="language-plaintext highlighter-rouge">drag-detect</code>. El valor predeterminat Ã©s generar-lo desprÃ©s de lâ€™esdeveniment <code class="language-plaintext highlighter-rouge">mouse-dragged</code>. Si desitja generar-ho desprÃ©s de lâ€™esdeveniment <code class="language-plaintext highlighter-rouge">mouse-pressed</code>, i no depres de lâ€™esdeveniment <code class="language-plaintext highlighter-rouge">mouse-dragged</code>, ha de modificar els controladors dâ€™esdeveniments:</p>

<p>Els mÃ¨todes que es poden utilitzar per crear un event com aquest son els segÃ¼ents. En la segÃ¼ent llista es poden veure mÃ©s mÃ©todes dels esencialment necessaris:</p>

<ul>
  <li><strong>setOnMousePressed</strong>: Defineix una funciÃ³ que es crida quan es pressiona un botÃ³ del mouse en aquest Node.</li>
  <li><strong>setOnMouseReleased</strong>: Defineix una funciÃ³ que es crida quan es solta un botÃ³ del mouse en aquest Node.</li>
  <li><strong>setOnMouseDragged</strong>: Defineix una funciÃ³ que es crida quan es <strong>pressiona un botÃ³</strong> del mouse en aquest Node <strong>i despres sâ€™arrosega</strong>.</li>
  <li><strong>setOnDragDetected</strong>: Defineix una funciÃ³ que es crida quan es <strong>detecta</strong> un gest dâ€™arrossegament.</li>
  <li><strong>setOnMouseDragEntered</strong>: Defineix una funciÃ³ que es cridarÃ  quan un gest complet de <em>pressionar, arrossegar i soltar</em> <strong>ingresa</strong> a aquest node.</li>
  <li><strong>setOnMouseDragOver</strong>: Defineix una funciÃ³ que es cridarÃ  quan un gest dâ€™arrosegament <strong>progresa</strong> dintre dâ€™aquest node.</li>
  <li><strong>setOnMouseDragReleased</strong>: Defineix una funciÃ³ que es cridarÃ  quan finalitza un gest complet de <em>pressionar, arrossegar i soltar</em> (soltar el botÃ³ del mouse) dintre dâ€™aquest node.</li>
  <li><strong>setOnMouseDragExited</strong>: Defineix una funciÃ³ que es cridarÃ  quan un gest complet de <em>pressionar, arrossegar i soltar</em> <strong>abandona</strong> aquest node.</li>
</ul>

<p>A continuaciÃ³ es pot observar la part del codi on es defineixen les funcions activades per un event del mouse. (No estÃ  la resta del codi).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//quan fem click en el botÃ³ del ratolÃ­.
        textSource.setOnMousePressed(new EventHandler &lt;MouseEvent&gt;()
        {
            public void handle(MouseEvent event)
            {
                textSource.setMouseTransparent(true);
                System.out.println("Event en Orige: mouse pressed");
                event.setDragDetect(true);
            }
        });

        //QWuan soltem botÃ³ del ratolÃ­.
        textSource.setOnMouseReleased(new EventHandler &lt;MouseEvent&gt;()
        {
            public void handle(MouseEvent event)
            {
                textSource.setMouseTransparent(false);
                System.out.println("Event en Orige: mouse released");
            }
        });


        //funciÃ³ que es crida una vegada cada vegada que el mouse es mou mentres es tÃ© el botÂ´o apretat.
        textSource.setOnMouseDragged(new EventHandler &lt;MouseEvent&gt;()
        {
            public void handle(MouseEvent event)
            {
                System.out.println("Event en Orige: mouse dragged");
                event.setDragDetect(false);
            }
        });

        // detecta inici d'arrosegament.
        textSource.setOnDragDetected(new EventHandler &lt;MouseEvent&gt;()
        {
            public void handle(MouseEvent event)
            {
                System.out.println("Event en Orige: drag detected");
                textSource.startFullDrag();
            }
        });

        //es cridat quan un event que estÃ  sent arrosegat, entra en el node. s'utilitza en el node detÃ­.
        textTarget.setOnMouseDragEntered(new EventHandler &lt;MouseDragEvent&gt;()
        {
            public void handle(MouseDragEvent event)
            {
                System.out.println("Event en destÃ­: mouse dragged");
            }
        });

        //defineix la funciÃ³ quan el gest d'arrosegament progresa en el node.
        textTarget.setOnMouseDragOver(new EventHandler &lt;MouseDragEvent&gt;()
        {
            public void handle(MouseDragEvent event)
            {
                System.out.println("Event en destÃ­: mouse drag over");
            }
        });

        //Aquesta funciÃ³ s'activa quan es solta el botÃ³ despres del gest del event drag and drop
        textTarget.setOnMouseDragReleased(new EventHandler &lt;MouseDragEvent&gt;()
        {
            public void handle(MouseDragEvent event)
            {
                textTarget.setText(textSource.getSelectedText());
                System.out.println("Event en destÃ­: mouse drag released");
            }
        });

        //Defineix una funciÃ³ que es cridarÃ¡ quan un gest complet de Drag&amp;Drop ha abandonat aquest node.
        textSource.setOnMouseDragExited(new EventHandler &lt;MouseDragEvent&gt;()
        {
            public void handle(MouseDragEvent event)
            {
                System.out.println("Event en destÃ­: mouse drag exited");
            }
        });
</code></pre></div></div>

<p>Examples:</p>

<ul>
  <li>
    <p>Text: https://examples.javacodegeeks.com/desktop-java/javafx/event-javafx/javafx-drag-drop-example/</p>
  </li>
  <li>
    <p>images: https://www.youtube.com/watch?v=Ulp1Kimblg0
  El tinc fet en el intellij idea</p>
  </li>
</ul>

<p><a href="../../javafx.html">back</a></p>
:ET